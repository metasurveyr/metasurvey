<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Primeros pasos con metasurvey (ES) • metasurvey</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Primeros pasos con metasurvey (ES)">
<!-- javascript assets for rmarkdown --><meta name="pkgdown-site-root" content="../">
<script src="../ace-1.2.3/ace.js" type="text/javascript" charset="utf-8"></script><script src="../holder-2.9.0/holder.min.js" type="text/javascript" charset="utf-8"></script><script src="../snippets/snippets.js" type="text/javascript" charset="utf-8"></script><style type="text/css">
.snippet {
  border: solid 1px #cccccc;
  margin-bottom: 12px;
  width: 100%;
}
</style>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">metasurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.21</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/getting-started.html">Get Started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Core Features</h6></li>
    <li><a class="dropdown-item" href="../articles/recipes.html">Recipes</a></li>
    <li><a class="dropdown-item" href="../articles/workflows-and-estimation.html">Workflows &amp; Estimation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Topics</h6></li>
    <li><a class="dropdown-item" href="../articles/complex-designs.html">Complex Designs</a></li>
    <li><a class="dropdown-item" href="../articles/panel-analysis.html">Panel Analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Infrastructure</h6></li>
    <li><a class="dropdown-item" href="../articles/shiny-explorer.html">Shiny Explorer</a></li>
    <li><a class="dropdown-item" href="../articles/api-database.html">REST API &amp; Database</a></li>
    <li><a class="dropdown-item" href="../articles/self-hosting.html">Self-Hosting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Interoperability</h6></li>
    <li><a class="dropdown-item" href="../articles/stata-transpiler.html">STATA Transpiler</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Case Studies</h6></li>
    <li><a class="dropdown-item" href="../articles/ech-demographics-recipe.html">ECH Demographics Recipe</a></li>
    <li><a class="dropdown-item" href="../articles/ech-case-study.html">ECH Case Study</a></li>
    <li><a class="dropdown-item" href="../articles/international-surveys.html">International Surveys</a></li>
    <li><a class="dropdown-item" href="../articles/convey-inequality.html">Inequality with convey</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Español</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started-es.html">Comenzando</a></li>
    <li><a class="dropdown-item" href="../articles/recipes-es.html">Recetas</a></li>
    <li><a class="dropdown-item" href="../articles/workflows-and-estimation-es.html">Workflows y Estimaciones</a></li>
    <li><a class="dropdown-item" href="../articles/complex-designs-es.html">Diseños Complejos</a></li>
    <li><a class="dropdown-item" href="../articles/panel-analysis-es.html">Análisis de Panel</a></li>
    <li><a class="dropdown-item" href="../articles/ech-case-study-es.html">Caso de Estudio ECH</a></li>
    <li><a class="dropdown-item" href="../articles/ech-demographics-recipe-es.html">Demografía ECH</a></li>
    <li><a class="dropdown-item" href="../articles/international-surveys-es.html">Encuestas Internacionales</a></li>
    <li><a class="dropdown-item" href="../articles/shiny-explorer-es.html">Explorador Shiny</a></li>
    <li><a class="dropdown-item" href="../articles/api-database-es.html">API y Base de Datos</a></li>
    <li><a class="dropdown-item" href="../articles/self-hosting-es.html">Self-Hosting</a></li>
    <li><a class="dropdown-item" href="../articles/stata-transpiler-es.html">Transpilador STATA</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reference" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reference</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reference">
<li><a class="dropdown-item" href="../reference/index.html#surveys">Survey Objects</a></li>
    <li><a class="dropdown-item" href="../reference/index.html#steps">Step Pipeline</a></li>
    <li><a class="dropdown-item" href="../reference/index.html#recipes">Recipes</a></li>
    <li><a class="dropdown-item" href="../reference/index.html#recipe-discovery">Recipe Discovery</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../reference/index.html#estimation">Estimation &amp; Provenance</a></li>
    <li><a class="dropdown-item" href="../reference/index.html#rotating-panels">Rotating Panels</a></li>
    <li><a class="dropdown-item" href="../reference/index.html#weights-and-design">Weights &amp; Design</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../reference/index.html#remote-api">Remote API</a></li>
    <li><a class="dropdown-item" href="../reference/index.html#anda">ANDA Catalog</a></li>
    <li><a class="dropdown-item" href="../reference/index.html#stata-transpiler">STATA Transpiler</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../reference/index.html">All functions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/metasurveyr/metasurvey/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="getting-started-es_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="getting-started-es_files/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="getting-started-es_files/vis-9.1.0/vis-network.min.js"></script><script src="getting-started-es_files/visNetwork-binding-2.1.4/visNetwork.js"></script><link href="getting-started-es_files/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Primeros pasos con metasurvey (ES)</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/metasurveyr/metasurvey/blob/main/vignettes/getting-started-es.Rmd" class="external-link"><code>vignettes/getting-started-es.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started-es.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduccion">Introduccion<a class="anchor" aria-label="anchor" href="#introduccion"></a>
</h2>
<p>Trabajar con microdatos de encuestas de hogares implica una gran
cantidad de procesamiento repetitivo: recodificar variables categoricas,
construir indicadores, unir datos externos y calcular estimaciones
ponderadas. Cada investigador escribe su propia version de estas
transformaciones, y el codigo rara vez se comparte o documenta de forma
que otros puedan reutilizarlo.</p>
<p><strong>metasurvey</strong> aborda este problema proporcionando una
capa de metaprogramacion sobre el paquete <code>survey</code> <span class="citation">(<a href="#ref-lumley2004">Lumley 2004</a>)</span>. En
lugar de escribir scripts ad hoc, se construye un
<strong>pipeline</strong> de transformaciones que es:</p>
<ul>
<li>
<strong>Documentado</strong> – cada paso lleva un comentario, sus
variables de entrada/salida y sus dependencias</li>
<li>
<strong>Reproducible</strong> – el pipeline puede guardarse como una
receta y aplicarse a nuevos datos</li>
<li>
<strong>Compartible</strong> – las recetas pueden publicarse en una
API publica donde otros investigadores pueden descubrirlas y
reutilizarlas</li>
</ul>
<p>El pipeline tiene tres niveles:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Steps</strong> – transformaciones individuales (compute,
recode, filter, rename, remove, join, validate)</li>
<li>
<strong>Recipes</strong> – colecciones reutilizables de steps
agrupados con metadatos</li>
<li>
<strong>Workflows</strong> – estimaciones estadisticas
(<code>svymean</code>, <code>svytotal</code>, <code>svyby</code>) que
producen las tablas finales</li>
</ol>
<p>El paquete maneja el survey design —estratificacion, conglomerados,
pesos replicados— automaticamente a traves del objeto
<code>Survey</code>. El usuario se enfoca en el analisis sustantivo;
metasurvey se encarga de la infraestructura.</p>
</div>
<div class="section level2">
<h2 id="instalacion">Instalacion<a class="anchor" aria-label="anchor" href="#instalacion"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from GitHub</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"metaSurveyR/metasurvey"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://metasurveyr.github.io/metasurvey/">metasurvey</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creacion-de-un-objeto-survey">Creacion de un objeto Survey<a class="anchor" aria-label="anchor" href="#creacion-de-un-objeto-survey"></a>
</h2>
<p>Un objeto <code>Survey</code> agrupa los microdatos con metadatos
sobre pesos, edicion y tipo de encuesta. Utilizamos una muestra de
microdatos reales de la <em>Encuesta Continua de Hogares</em> (ECH)
2023, publicada por el Instituto Nacional de Estadistica (INE) de
Uruguay.</p>
<p>La ECH es una encuesta de hogares de panel rotativo. Las variables
clave incluyen:</p>
<ul>
<li>
<strong>e27</strong>: Edad en anios</li>
<li>
<strong>e26</strong>: Sexo (1 = Hombre, 2 = Mujer)</li>
<li>
<strong>e30</strong>: Parentesco con el jefe de hogar (1-14)</li>
<li>
<strong>POBPCOAC</strong>: Condicion de actividad
<ul>
<li>1 = Menor de 14</li>
<li>2 = Ocupado</li>
<li>3-5 = Desocupado</li>
<li>6-10 = Inactivo</li>
<li>11 = No aplica</li>
</ul>
</li>
<li>
<strong>HT11</strong>: Ingreso del hogar (pesos uruguayos)</li>
<li>
<strong>W_ANO</strong>: Factor de expansion anual (peso)</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://metasurveyr.github.io/metasurvey/">metasurvey</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Cargar muestra de microdatos reales de la ECH 2023 (200 hogares, ~500 personas)</span></span>
<span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ech_2023_sample.csv"</span>, package <span class="op">=</span> <span class="st">"metasurvey"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Crear objeto Survey</span></span>
<span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Survey.html">Survey</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  data    <span class="op">=</span> <span class="va">dt</span>,</span>
<span>  edition <span class="op">=</span> <span class="st">"2023"</span>,</span>
<span>  type    <span class="op">=</span> <span class="st">"ech"</span>,</span>
<span>  engine  <span class="op">=</span> <span class="st">"data.table"</span>,</span>
<span>  weight  <span class="op">=</span> <span class="fu"><a href="../reference/add_weight.html">add_weight</a></span><span class="op">(</span>annual <span class="op">=</span> <span class="st">"W_ANO"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>La funcion <code><a href="../reference/add_weight.html">add_weight()</a></code> mapea etiquetas de periodicidad
(por ejemplo, “annual”, “monthly”) a los nombres de las columnas de
pesos en los datos. Esto permite que la misma receta funcione con
distintas ediciones de la encuesta.</p>
<p>Es posible inspeccionar los datos en cualquier momento:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;       ID  nper  anio   mes region  dpto   nom_dpto   e26   e27   e30 e51_2</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;int&gt;     &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1: 34561     1  2023     1      1     1 Montevideo     2    26     1     6</span></span>
<span><span class="co">#&gt; 2: 34561     2  2023     1      1     1 Montevideo     2    45     7     6</span></span>
<span><span class="co">#&gt; 3: 34561     3  2023     1      1     1 Montevideo     2     7     4     1</span></span>
<span><span class="co">#&gt;    POBPCOAC SUBEMPLEO    HT11 pobre06 W_ANO</span></span>
<span><span class="co">#&gt;       &lt;int&gt;     &lt;int&gt;   &lt;num&gt;   &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:        2         0 55429.6       0    57</span></span>
<span><span class="co">#&gt; 2:        4         0 55429.6       0    57</span></span>
<span><span class="co">#&gt; 3:        1         0 55429.6       0    57</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="trabajo-con-steps">Trabajo con Steps<a class="anchor" aria-label="anchor" href="#trabajo-con-steps"></a>
</h2>
<p>Los steps son <strong>lazy por defecto</strong>: se registran pero no
se ejecutan hasta que se llama a <code><a href="../reference/bake_steps.html">bake_steps()</a></code>. Esto
permite:</p>
<ol style="list-style-type: decimal">
<li>Construir un pipeline de transformacion completo</li>
<li>Inspeccionar y validar los steps antes de la ejecucion</li>
<li>Reutilizar secuencias de steps como recetas</li>
<li>Asegurar que todas las dependencias existan antes del
procesamiento</li>
</ol>
<div class="section level3">
<h3 id="calculo-de-nuevas-variables">Calculo de nuevas variables<a class="anchor" aria-label="anchor" href="#calculo-de-nuevas-variables"></a>
</h3>
<p>Se utiliza <code><a href="../reference/step_compute.html">step_compute()</a></code> para crear variables
derivadas. El paquete automaticamente:</p>
<ul>
<li>Valida que las variables de entrada existan</li>
<li>Detecta dependencias entre steps</li>
<li>Optimiza las expresiones para mejorar el rendimiento</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/step_compute.html">step_compute</a></span><span class="op">(</span><span class="va">svy</span>,</span>
<span>  <span class="co"># Convert income to thousands for readability</span></span>
<span>  ht11_thousands <span class="op">=</span> <span class="va">HT11</span> <span class="op">/</span> <span class="fl">1000</span>,</span>
<span></span>
<span>  <span class="co"># Create employment indicator following ILO definitions</span></span>
<span>  employed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">POBPCOAC</span> <span class="op">==</span> <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span></span>
<span>  <span class="co"># Working age population (14+ years, ECH standard)</span></span>
<span>  working_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">e27</span> <span class="op">&gt;=</span> <span class="fl">14</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  comment <span class="op">=</span> <span class="st">"Basic labor force indicators"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Es posible agrupar calculos usando el parametro <code>.by</code>
(similar a <code>data.table</code>):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate mean household income per department</span></span>
<span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/step_compute.html">step_compute</a></span><span class="op">(</span><span class="va">svy</span>,</span>
<span>  mean_income_dept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">HT11</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  .by <span class="op">=</span> <span class="st">"dpto"</span>,</span>
<span>  comment <span class="op">=</span> <span class="st">"Department-level income averages"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="recodificacion-en-categorias">Recodificacion en categorias<a class="anchor" aria-label="anchor" href="#recodificacion-en-categorias"></a>
</h3>
<p>Se utiliza <code><a href="../reference/step_recode.html">step_recode()</a></code> para crear variables
categoricas a partir de condiciones. Las condiciones se evaluan
<strong>de arriba hacia abajo</strong>, y la primera coincidencia es la
que se aplica.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Recode labor force status (POBPCOAC) into meaningful categories</span></span>
<span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/step_recode.html">step_recode</a></span><span class="op">(</span><span class="va">svy</span>, <span class="va">labor_status</span>,</span>
<span>  <span class="va">POBPCOAC</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Employed"</span>,</span>
<span>  <span class="va">POBPCOAC</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">3</span><span class="op">:</span><span class="fl">5</span> <span class="op">~</span> <span class="st">"Unemployed"</span>,</span>
<span>  <span class="va">POBPCOAC</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">6</span><span class="op">:</span><span class="fl">10</span> <span class="op">~</span> <span class="st">"Inactive"</span>,</span>
<span>  .default <span class="op">=</span> <span class="st">"Not classified"</span>,</span>
<span>  comment <span class="op">=</span> <span class="st">"Labor force status - ILO standard"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create standard age groups for labor statistics</span></span>
<span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/step_recode.html">step_recode</a></span><span class="op">(</span><span class="va">svy</span>, <span class="va">age_group</span>,</span>
<span>  <span class="va">e27</span> <span class="op">&lt;</span> <span class="fl">25</span> <span class="op">~</span> <span class="st">"Youth (14-24)"</span>,</span>
<span>  <span class="va">e27</span> <span class="op">&lt;</span> <span class="fl">45</span> <span class="op">~</span> <span class="st">"Adult (25-44)"</span>,</span>
<span>  <span class="va">e27</span> <span class="op">&lt;</span> <span class="fl">65</span> <span class="op">~</span> <span class="st">"Mature (45-64)"</span>,</span>
<span>  .default <span class="op">=</span> <span class="st">"Elderly (65+)"</span>,</span>
<span>  .to_factor <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># Convert to factor</span></span>
<span>  ordered <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># Ordered factor</span></span>
<span>  comment <span class="op">=</span> <span class="st">"Age groups for labor analysis"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Recode sex into descriptive labels</span></span>
<span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/step_recode.html">step_recode</a></span><span class="op">(</span><span class="va">svy</span>, <span class="va">gender</span>,</span>
<span>  <span class="va">e26</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Male"</span>,</span>
<span>  <span class="va">e26</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Female"</span>,</span>
<span>  .default <span class="op">=</span> <span class="st">"Other"</span>,</span>
<span>  comment <span class="op">=</span> <span class="st">"Gender classification"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="filtrado-de-filas">Filtrado de filas<a class="anchor" aria-label="anchor" href="#filtrado-de-filas"></a>
</h3>
<p>Se utiliza <code><a href="../reference/step_filter.html">step_filter()</a></code> para seleccionar filas segun
condiciones logicas. Multiples condiciones se combinan con AND. Al igual
que los demas steps, los filtros son lazy por defecto.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mantener solo individuos en edad de trabajar (14+)</span></span>
<span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/step_filter.html">step_filter</a></span><span class="op">(</span><span class="va">svy</span>,</span>
<span>  <span class="va">e27</span> <span class="op">&gt;=</span> <span class="fl">14</span>,</span>
<span>  comment <span class="op">=</span> <span class="st">"Working-age population only"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="renombrar-y-eliminar-variables">Renombrar y eliminar variables<a class="anchor" aria-label="anchor" href="#renombrar-y-eliminar-variables"></a>
</h3>
<p>Se renombran variables para mayor claridad o consistencia:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/step_rename.html">step_rename</a></span><span class="op">(</span><span class="va">svy</span>,</span>
<span>  age <span class="op">=</span> <span class="va">e27</span>, <span class="co"># Rename e27 to age</span></span>
<span>  sex_code <span class="op">=</span> <span class="va">e26</span> <span class="co"># Keep original as sex_code</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Se eliminan variables que ya no son necesarias:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Remove intermediate calculations</span></span>
<span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/step_remove.html">step_remove</a></span><span class="op">(</span><span class="va">svy</span>, <span class="va">working_age</span>, <span class="va">mean_income_dept</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="union-con-datos-externos">Union con datos externos<a class="anchor" aria-label="anchor" href="#union-con-datos-externos"></a>
</h3>
<p>Se utiliza <code><a href="../reference/step_join.html">step_join()</a></code> para unir datos de referencia
externos. Esto es util para agregar:</p>
<ul>
<li>Nombres y clasificaciones geograficas</li>
<li>Tipos de cambio o deflactores</li>
<li>Benchmarks o metas externas</li>
</ul>
<p>Los microdatos reales de la ECH ya incluyen <code>nom_dpto</code> y
<code>region</code>. Aqui demostramos un join con lineas de pobreza como
ejemplo:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Lineas de pobreza por region (valores ilustrativos en UYU, 2023)</span></span>
<span><span class="va">poverty_lines</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  region <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span>
<span>  poverty_line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19000</span>, <span class="fl">12500</span>, <span class="fl">11000</span><span class="op">)</span>,</span>
<span>  region_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Montevideo"</span>, <span class="st">"Interior loc. &gt;= 5000"</span>, <span class="st">"Interior loc. &lt; 5000"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/step_join.html">step_join</a></span><span class="op">(</span><span class="va">svy</span>,</span>
<span>  <span class="va">poverty_lines</span>,</span>
<span>  by <span class="op">=</span> <span class="st">"region"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"left"</span>,</span>
<span>  comment <span class="op">=</span> <span class="st">"Add poverty lines by region"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="ejecucion-de-transformaciones">Ejecucion de transformaciones<a class="anchor" aria-label="anchor" href="#ejecucion-de-transformaciones"></a>
</h2>
<div class="section level3">
<h3 id="aplicacion-de-steps-bake">Aplicacion de steps (bake)<a class="anchor" aria-label="anchor" href="#aplicacion-de-steps-bake"></a>
</h3>
<p>Se llama a <code><a href="../reference/bake_steps.html">bake_steps()</a></code> para ejecutar todas las
transformaciones pendientes:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bake_steps.html">bake_steps</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;    region  dpto    ID  nper  anio   mes   nom_dpto sex_code   age   e30 e51_2</span></span>
<span><span class="co">#&gt;     &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;char&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:      1     1 34561     1  2023     1 Montevideo        2    26     1     6</span></span>
<span><span class="co">#&gt; 2:      1     1 34561     2  2023     1 Montevideo        2    45     7     6</span></span>
<span><span class="co">#&gt; 3:      1     1 34678     1  2023     1 Montevideo        1    48     1     6</span></span>
<span><span class="co">#&gt;    POBPCOAC SUBEMPLEO     HT11 pobre06 W_ANO ht11_thousands employed</span></span>
<span><span class="co">#&gt;       &lt;int&gt;     &lt;int&gt;    &lt;num&gt;   &lt;int&gt; &lt;int&gt;          &lt;num&gt;    &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:        2         0  55429.6       0    57        55.4296        1</span></span>
<span><span class="co">#&gt; 2:        4         0  55429.6       0    57        55.4296        0</span></span>
<span><span class="co">#&gt; 3:        2         0 152958.8       0    54       152.9588        1</span></span>
<span><span class="co">#&gt;    labor_status      age_group gender poverty_line region_name poverty_line.y</span></span>
<span><span class="co">#&gt;          &lt;char&gt;         &lt;fctr&gt; &lt;char&gt;        &lt;num&gt;      &lt;char&gt;          &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     Employed Mature (45-64) Female        19000  Montevideo          19000</span></span>
<span><span class="co">#&gt; 2:   Unemployed Mature (45-64) Female        19000  Montevideo          19000</span></span>
<span><span class="co">#&gt; 3:     Employed Mature (45-64)   Male        19000  Montevideo          19000</span></span>
<span><span class="co">#&gt;    region_name.y</span></span>
<span><span class="co">#&gt;           &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:    Montevideo</span></span>
<span><span class="co">#&gt; 2:    Montevideo</span></span>
<span><span class="co">#&gt; 3:    Montevideo</span></span></code></pre></div>
<p>El historial de steps se preserva para documentacion y
reproducibilidad:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">steps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_steps.html">get_steps</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">steps</span><span class="op">)</span> <span class="co"># Number of transformation steps</span></span>
<span><span class="co">#&gt; [1] 9</span></span>
<span></span>
<span><span class="co"># View step details</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Step 1:"</span>, <span class="va">steps</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">name</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Step 1: step_1 Compute: ht11_thousands, employed, working_age</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Comment:"</span>, <span class="va">steps</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">comment</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Comment: Basic labor force indicators</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualizacion-del-pipeline">Visualizacion del pipeline<a class="anchor" aria-label="anchor" href="#visualizacion-del-pipeline"></a>
</h3>
<p>Es posible visualizar el pipeline de transformacion como un grafo
dirigido:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/view_graph.html">view_graph</a></span><span class="op">(</span><span class="va">svy</span>, init_step <span class="op">=</span> <span class="st">"Load ECH 2023"</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:600px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11],"label":["Load ECH 2023","step_1 Compute: ht11_thousands, employed, working_age","step_2 Compute: mean_income_dept","step_3 Recode: labor_status","step_4 Recode: age_group","step_5 Recode: gender","step_6 Filter: e27 >= 14","step_7 Rename: age=e27, sex_code=e26","step_8 Remove: working_age, mean_income_dept","step_9 Join (left): region","Data: poverty_lines"],"title":["Load ECH 2023","<div style='font-family: system-ui, -apple-system, sans-serif; padding: 10px 14px; max-width: 340px;'><div style='font-weight: 700; font-size: 13px; color: #2C3E50; margin-bottom: 6px; border-bottom: 2px solid #eee; padding-bottom: 6px;'>Basic labor force indicators<\/div><div style='font-family: SFMono-Regular, Consolas, monospace; font-size: 11px; color: #6c757d; background: #f8f9fa; padding: 8px 10px; border-radius: 6px; line-height: 1.5; white-space: pre-wrap;'>list(ht11_thousands = HT11/1000, employed = ifelse(POBPCOAC == 2, 1, 0), working_age = ifelse(e27 &gt;= 14, 1, 0))<\/div><\/div>","<div style='font-family: system-ui, -apple-system, sans-serif; padding: 10px 14px; max-width: 340px;'><div style='font-weight: 700; font-size: 13px; color: #2C3E50; margin-bottom: 6px; border-bottom: 2px solid #eee; padding-bottom: 6px;'>Department-level income averages<\/div><div style='font-family: SFMono-Regular, Consolas, monospace; font-size: 11px; color: #6c757d; background: #f8f9fa; padding: 8px 10px; border-radius: 6px; line-height: 1.5; white-space: pre-wrap;'>list(mean_income_dept = mean(HT11, na.rm = TRUE))<\/div><\/div>","<div style='font-family: system-ui, -apple-system, sans-serif; padding: 10px 14px; max-width: 340px;'><div style='font-weight: 700; font-size: 13px; color: #2C3E50; margin-bottom: 6px; border-bottom: 2px solid #eee; padding-bottom: 6px;'>Labor force status - ILO standard<\/div><div style='font-family: SFMono-Regular, Consolas, monospace; font-size: 11px; color: #6c757d; background: #f8f9fa; padding: 8px 10px; border-radius: 6px; line-height: 1.5; white-space: pre-wrap;'>labor_status: list(POBPCOAC == 2 ~ \"Employed\", POBPCOAC %in% 3:5 ~ \"Unemployed\", POBPCOAC %in% 6:10 ~ \"Inactive\")<\/div><\/div>","<div style='font-family: system-ui, -apple-system, sans-serif; padding: 10px 14px; max-width: 340px;'><div style='font-weight: 700; font-size: 13px; color: #2C3E50; margin-bottom: 6px; border-bottom: 2px solid #eee; padding-bottom: 6px;'>Age groups for labor analysis<\/div><div style='font-family: SFMono-Regular, Consolas, monospace; font-size: 11px; color: #6c757d; background: #f8f9fa; padding: 8px 10px; border-radius: 6px; line-height: 1.5; white-space: pre-wrap;'>age_group: list(e27 &lt; 25 ~ \"Youth (14-24)\", e27 &lt; 45 ~ \"Adult (25-44)\", e27 &lt; 65 ~ \"Mature (45-64)\")<\/div><\/div>","<div style='font-family: system-ui, -apple-system, sans-serif; padding: 10px 14px; max-width: 340px;'><div style='font-weight: 700; font-size: 13px; color: #2C3E50; margin-bottom: 6px; border-bottom: 2px solid #eee; padding-bottom: 6px;'>Gender classification<\/div><div style='font-family: SFMono-Regular, Consolas, monospace; font-size: 11px; color: #6c757d; background: #f8f9fa; padding: 8px 10px; border-radius: 6px; line-height: 1.5; white-space: pre-wrap;'>gender: list(e26 == 1 ~ \"Male\", e26 == 2 ~ \"Female\")<\/div><\/div>","<div style='font-family: system-ui, -apple-system, sans-serif; padding: 10px 14px; max-width: 340px;'><div style='font-weight: 700; font-size: 13px; color: #2C3E50; margin-bottom: 6px; border-bottom: 2px solid #eee; padding-bottom: 6px;'>Working-age population only<\/div><div style='font-family: SFMono-Regular, Consolas, monospace; font-size: 11px; color: #6c757d; background: #f8f9fa; padding: 8px 10px; border-radius: 6px; line-height: 1.5; white-space: pre-wrap;'>list(e27 &gt;= 14)<\/div><\/div>","<div style='font-family: system-ui, -apple-system, sans-serif; padding: 10px 14px; max-width: 340px;'><div style='font-weight: 700; font-size: 13px; color: #2C3E50; margin-bottom: 6px; border-bottom: 2px solid #eee; padding-bottom: 6px;'>Rename variables<\/div><div style='font-family: SFMono-Regular, Consolas, monospace; font-size: 11px; color: #6c757d; background: #f8f9fa; padding: 8px 10px; border-radius: 6px; line-height: 1.5; white-space: pre-wrap;'>list(mapping = c(age = \"e27\", sex_code = \"e26\"))<\/div><\/div>","<div style='font-family: system-ui, -apple-system, sans-serif; padding: 10px 14px; max-width: 340px;'><div style='font-weight: 700; font-size: 13px; color: #2C3E50; margin-bottom: 6px; border-bottom: 2px solid #eee; padding-bottom: 6px;'>Remove variables<\/div><div style='font-family: SFMono-Regular, Consolas, monospace; font-size: 11px; color: #6c757d; background: #f8f9fa; padding: 8px 10px; border-radius: 6px; line-height: 1.5; white-space: pre-wrap;'>list(vars = c(\"working_age\", \"mean_income_dept\"))<\/div><\/div>","<div style='font-family: system-ui, -apple-system, sans-serif; padding: 10px 14px; max-width: 340px;'><div style='font-weight: 700; font-size: 13px; color: #2C3E50; margin-bottom: 6px; border-bottom: 2px solid #eee; padding-bottom: 6px;'>Add poverty lines by region<\/div><div style='font-family: SFMono-Regular, Consolas, monospace; font-size: 11px; color: #6c757d; background: #f8f9fa; padding: 8px 10px; border-radius: 6px; line-height: 1.5; white-space: pre-wrap;'>list(x = structure(list(region = 1:3, poverty_line = c(19000, 12500, 11000), region_name = c(\"Montevideo\", \"Interior loc. &gt;= 5000\", \"Interior loc. &lt; 5000\")), row.names = c(NA, -3L), class = c(\"data.table\", \"data.frame\"), .internal.selfref = &lt;pointer: 0x558f6b7f9ee0&gt;), by = \"region\", type = \"left\", suffixes = c(\"\", \".y\"))<\/div><\/div>","<div style='font-family: system-ui, sans-serif; padding: 10px 14px;'><div style='font-weight: 700; color: #2C3E50;'>External data.frame<\/div><div style='font-size: 12px; color: #6c757d; margin-top: 4px;'>poverty_lines<\/div><\/div>"],"group":["Load survey","compute","compute","recode","recode","recode","filter","step_rename","step_remove","step_join","dataframe"]},"edges":{"from":[1,2,3,4,5,6,7,8,9,11],"to":[2,3,4,5,6,7,8,9,10,10]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false},"groups":{"Load survey":{"shape":"icon","icon":{"code":"f1c0","size":60,"color":"#2C3E50"},"font":{"size":16,"color":"#2C3E50","face":"bold","multi":true},"shadow":{"enabled":true,"size":8,"x":2,"y":2,"color":"rgba(44,62,80,.15)"}},"compute":{"shape":"icon","icon":{"code":"f1ec","size":50,"color":"#3498db"},"font":{"size":14,"color":"#2c3e50","face":"bold"},"shadow":{"enabled":true,"size":6,"x":2,"y":2,"color":"rgba(52,152,219,.2)"}},"recode":{"shape":"icon","icon":{"code":"f0e8","size":50,"color":"#9b59b6"},"font":{"size":14,"color":"#2c3e50","face":"bold"},"shadow":{"enabled":true,"size":6,"x":2,"y":2,"color":"rgba(155,89,182,.2)"}},"step_join":{"shape":"icon","icon":{"code":"f0c1","size":50,"color":"#1abc9c"},"font":{"size":14,"color":"#2c3e50","face":"bold"},"shadow":{"enabled":true,"size":6,"x":2,"y":2,"color":"rgba(26,188,156,.2)"}},"step_remove":{"shape":"icon","icon":{"code":"f1f8","size":50,"color":"#e74c3c"},"font":{"size":14,"color":"#2c3e50","face":"bold"},"shadow":{"enabled":true,"size":6,"x":2,"y":2,"color":"rgba(231,76,60,.2)"}},"step_rename":{"shape":"icon","icon":{"code":"f044","size":50,"color":"#e67e22"},"font":{"size":14,"color":"#2c3e50","face":"bold"},"shadow":{"enabled":true,"size":6,"x":2,"y":2,"color":"rgba(230,126,34,.2)"}},"validate":{"shape":"icon","icon":{"code":"f058","size":50,"color":"#27ae60"},"font":{"size":14,"color":"#2c3e50","face":"bold"},"shadow":{"enabled":true,"size":6,"x":2,"y":2,"color":"rgba(39,174,96,.2)"}},"useDefaultGroups":true,"dataframe":{"shape":"icon","icon":{"code":"f0ce","size":50,"color":"#95a5a6"},"font":{"size":14,"color":"#2c3e50"},"shadow":{"enabled":true,"size":6,"x":2,"y":2,"color":"rgba(149,165,166,.2)"}}},"edges":{"width":2,"arrows":{"to":{"enabled":true,"scaleFactor":0.7,"type":"arrow"}},"color":{"color":"#bdc3c7","highlight":"#3498db","hover":"#3498db"},"smooth":{"enabled":true,"type":"curvedCW","roundness":0.1}},"layout":{"hierarchical":{"enabled":true,"levelSeparation":220,"nodeSpacing":140,"direction":"LR","sortMethod":"directed"}},"interaction":{"keyboard":true,"navigationButtons":true,"tooltipDelay":100,"hover":true,"zoomSpeed":1},"clickToUse":false},"groups":["Load survey","compute","recode","filter","step_rename","step_remove","step_join","dataframe"],"width":"100%","height":"600px","idselection":{"enabled":true,"style":"font-family: system-ui, sans-serif; font-size: 13px; padding: 6px 12px; border-radius: 8px; border: 1px solid #dee2e6; background: #fff; color: #2C3E50;","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":null,"submain":null,"footer":null,"background":"#f8f9fa","iconsRedraw":true,"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","highlight":{"enabled":true,"hoverNearest":true,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.15,"useGroups":true,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":false,"main":{"text":"Step types","style":"font-family: system-ui, sans-serif; font-weight: 700; font-size: 14px; color: #2C3E50;"}}},"evals":[],"jsHooks":[]}</script><p>Esto genera un grafo interactivo que muestra:</p>
<ul>
<li>Fuentes de datos y uniones</li>
<li>Steps de transformacion</li>
<li>Dependencias entre variables</li>
<li>Comentarios y metadatos</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="estimaciones-estadisticas">Estimaciones estadisticas<a class="anchor" aria-label="anchor" href="#estimaciones-estadisticas"></a>
</h2>
<p>Una vez preparados los datos, se utiliza <code><a href="../reference/workflow.html">workflow()</a></code> para
calcular estimaciones de encuesta. La funcion envuelve los estimadores
del paquete <code>survey</code> <span class="citation">(<a href="#ref-lumley2004">Lumley 2004</a>)</span> y devuelve resultados
ordenados con errores estandar y coeficientes de variacion.</p>
<p><strong>Importante:</strong> Se debe pasar el objeto survey dentro de
un <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>.</p>
<div class="section level3">
<h3 id="estimaciones-basicas">Estimaciones basicas<a class="anchor" aria-label="anchor" href="#estimaciones-basicas"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Estimate mean household income</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/workflow.html">workflow</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span>,</span>
<span>  <span class="fu">survey</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/surveysummary.html" class="external-link">svymean</a></span><span class="op">(</span><span class="op">~</span><span class="va">HT11</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  estimation_type <span class="op">=</span> <span class="st">"annual"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt;                     stat    value       se         cv confint_lower</span></span>
<span><span class="co">#&gt;                   &lt;char&gt;    &lt;num&gt;    &lt;num&gt;      &lt;num&gt;         &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: survey::svymean: HT11 110389.3 4076.154 0.03692528      102400.1</span></span>
<span><span class="co">#&gt;    confint_upper</span></span>
<span><span class="co">#&gt;            &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:      118378.4</span></span></code></pre></div>
<p>La salida incluye:</p>
<ul>
<li>
<code>estimate</code>: Estimacion puntual</li>
<li>
<code>se</code>: Error estandar</li>
<li>
<code>cv</code>: Coeficiente de variacion</li>
<li>
<code>var_name</code>: Nombre de la variable</li>
<li>
<code>level</code>: Nivel del factor (para variables
categoricas)</li>
</ul>
</div>
<div class="section level3">
<h3 id="estimaciones-multiples">Estimaciones multiples<a class="anchor" aria-label="anchor" href="#estimaciones-multiples"></a>
</h3>
<p>Es posible calcular varias estadisticas en una sola llamada:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/workflow.html">workflow</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span>,</span>
<span>  <span class="fu">survey</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/surveysummary.html" class="external-link">svymean</a></span><span class="op">(</span><span class="op">~</span><span class="va">HT11</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="co"># Mean income</span></span>
<span>  <span class="fu">survey</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/surveysummary.html" class="external-link">svytotal</a></span><span class="op">(</span><span class="op">~</span><span class="va">employed</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="co"># Total employed</span></span>
<span>  <span class="fu">survey</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/surveysummary.html" class="external-link">svymean</a></span><span class="op">(</span><span class="op">~</span><span class="va">labor_status</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="co"># Employment distribution</span></span>
<span>  estimation_type <span class="op">=</span> <span class="st">"annual"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span></span>
<span><span class="co">#&gt;                                       stat        value           se         cv</span></span>
<span><span class="co">#&gt;                                     &lt;char&gt;        &lt;num&gt;        &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:                   survey::svymean: HT11 1.103893e+05 4.076154e+03 0.03692528</span></span>
<span><span class="co">#&gt; 2:              survey::svytotal: employed 1.426200e+04 6.756206e+02 0.04737208</span></span>
<span><span class="co">#&gt; 3:   survey::svymean: labor_statusEmployed 5.551576e-01 2.610113e-02 0.04701571</span></span>
<span><span class="co">#&gt; 4:   survey::svymean: labor_statusInactive 3.860646e-01 2.551750e-02 0.06609646</span></span>
<span><span class="co">#&gt; 5: survey::svymean: labor_statusUnemployed 5.877773e-02 1.309115e-02 0.22272291</span></span>
<span><span class="co">#&gt;    confint_lower confint_upper</span></span>
<span><span class="co">#&gt;            &lt;num&gt;         &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:  1.024001e+05  1.183784e+05</span></span>
<span><span class="co">#&gt; 2:  1.293781e+04  1.558619e+04</span></span>
<span><span class="co">#&gt; 3:  5.040004e-01  6.063149e-01</span></span>
<span><span class="co">#&gt; 4:  3.360512e-01  4.360780e-01</span></span>
<span><span class="co">#&gt; 5:  3.311956e-02  8.443591e-02</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="estimacion-por-dominios">Estimacion por dominios<a class="anchor" aria-label="anchor" href="#estimacion-por-dominios"></a>
</h3>
<p>Se calculan estimaciones para subpoblaciones usando
<code><a href="https://rdrr.io/pkg/survey/man/svyby.html" class="external-link">survey::svyby()</a></code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mean income by gender</span></span>
<span><span class="va">income_by_gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/workflow.html">workflow</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span>,</span>
<span>  <span class="fu">survey</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyby.html" class="external-link">svyby</a></span><span class="op">(</span><span class="op">~</span><span class="va">HT11</span>, <span class="op">~</span><span class="va">gender</span>, <span class="fu">survey</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/survey/man/surveysummary.html" class="external-link">svymean</a></span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  estimation_type <span class="op">=</span> <span class="st">"annual"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">income_by_gender</span></span>
<span><span class="co">#&gt;                                   stat    value       se         cv</span></span>
<span><span class="co">#&gt;                                 &lt;char&gt;    &lt;num&gt;    &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: survey::svyby: HT11 [gender=Female] 111107.9 5955.676 0.05360263</span></span>
<span><span class="co">#&gt; 2:   survey::svyby: HT11 [gender=Male] 109608.9 5519.291 0.05035439</span></span>
<span><span class="co">#&gt;    confint_lower confint_upper gender</span></span>
<span><span class="co">#&gt;            &lt;num&gt;         &lt;num&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:      99434.99      122780.8 Female</span></span>
<span><span class="co">#&gt; 2:      98791.31      120426.5   Male</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="evaluacion-de-calidad">Evaluacion de calidad<a class="anchor" aria-label="anchor" href="#evaluacion-de-calidad"></a>
</h2>
<p>El <strong>coeficiente de variacion (CV)</strong> mide la
confiabilidad de las estimaciones. Un CV mas bajo indica estimaciones
mas precisas. Siguiendo las pautas del INE Uruguay <span class="citation">(<a href="#ref-ine2023">Instituto Nacional de
Estadística (INE) 2023</a>)</span>:</p>
<table class="table">
<colgroup>
<col width="26%">
<col width="44%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th>Rango de CV</th>
<th>Categoria de calidad</th>
<th>Recomendacion</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>&lt; 5%</td>
<td>Excelente</td>
<td>Usar sin restricciones</td>
</tr>
<tr class="even">
<td>5%–10%</td>
<td>Muy buena</td>
<td>Usar con confianza</td>
</tr>
<tr class="odd">
<td>10%–15%</td>
<td>Buena</td>
<td>Usar para la mayoria de los propositos</td>
</tr>
<tr class="even">
<td>15%–25%</td>
<td>Aceptable</td>
<td>Usar con precaucion, senialando limitaciones</td>
</tr>
<tr class="odd">
<td>25%–35%</td>
<td>Pobre</td>
<td>Usar solo para tendencias generales</td>
</tr>
<tr class="even">
<td>&gt;= 35%</td>
<td>No confiable</td>
<td>No publicar</td>
</tr>
</tbody>
</table>
<p>Se utiliza <code><a href="../reference/evaluate_cv.html">evaluate_cv()</a></code> para clasificar la calidad de
las estimaciones:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check quality of mean income estimate</span></span>
<span><span class="va">cv_percentage</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">$</span><span class="va">cv</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="va">quality</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evaluate_cv.html">evaluate_cv</a></span><span class="op">(</span><span class="va">cv_percentage</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"CV:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">cv_percentage</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; CV: 3.69 %</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Quality:"</span>, <span class="va">quality</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Quality: Excellent</span></span></code></pre></div>
<p>Para estadisticas oficiales, siempre se debe reportar:</p>
<ol style="list-style-type: decimal">
<li>Estimacion puntual</li>
<li>Error estandar o intervalo de confianza</li>
<li>Coeficiente de variacion</li>
<li>Clasificacion de calidad</li>
<li>Tamanio de la muestra</li>
</ol>
</div>
<div class="section level2">
<h2 id="trabajo-con-recipes">Trabajo con Recipes<a class="anchor" aria-label="anchor" href="#trabajo-con-recipes"></a>
</h2>
<p>Las recipes agrupan steps de transformacion para
<strong>reproducibilidad</strong> y <strong>comparticion</strong>. Una
vez desarrollado un pipeline funcional, se puede convertir en una receta
que puede ser:</p>
<ul>
<li>Aplicada a diferentes ediciones de la encuesta</li>
<li>Compartida con colaboradores</li>
<li>Publicada para garantizar transparencia</li>
<li>Versionada y documentada</li>
</ul>
<div class="section level3">
<h3 id="creacion-de-una-recipe">Creacion de una Recipe<a class="anchor" aria-label="anchor" href="#creacion-de-una-recipe"></a>
</h3>
<p>Se crea una receta a partir de los steps desarrollados:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert current steps to a recipe</span></span>
<span><span class="va">labor_recipe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/steps_to_recipe.html">steps_to_recipe</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"ECH Labor Force Indicators"</span>,</span>
<span>  user <span class="op">=</span> <span class="st">"National Statistics Office"</span>,</span>
<span>  svy <span class="op">=</span> <span class="va">svy</span>,</span>
<span>  description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>    <span class="st">"Standard labor force indicators following ILO definitions."</span>,</span>
<span>    <span class="st">"Creates employment status, age groups, and gender classifications."</span></span>
<span>  <span class="op">)</span>,</span>
<span>  steps <span class="op">=</span> <span class="fu"><a href="../reference/get_steps.html">get_steps</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span>,</span>
<span>  topic <span class="op">=</span> <span class="st">"labor_statistics"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">labor_recipe</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Recipe" "R6"</span></span>
<span><span class="va">labor_recipe</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="co">#&gt; [1] "ECH Labor Force Indicators"</span></span></code></pre></div>
<p>O se puede definir una receta desde cero:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">minimal_recipe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recipe.html">recipe</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"Basic Demographics - ECH"</span>,</span>
<span>  user <span class="op">=</span> <span class="st">"analyst"</span>,</span>
<span>  svy <span class="op">=</span> <span class="fu"><a href="../reference/survey_empty.html">survey_empty</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"ech"</span>, edition <span class="op">=</span> <span class="st">"2023"</span><span class="op">)</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Basic demographic recoding for ECH microdata"</span>,</span>
<span>  topic <span class="op">=</span> <span class="st">"demographics"</span>,</span>
<span></span>
<span>  <span class="co"># Define steps inline</span></span>
<span>  <span class="fu"><a href="../reference/step_recode.html">step_recode</a></span><span class="op">(</span></span>
<span>    <span class="va">gender</span>,</span>
<span>    <span class="va">e26</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Male"</span>,</span>
<span>    <span class="va">e26</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Female"</span>,</span>
<span>    .default <span class="op">=</span> <span class="st">"Other"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/step_recode.html">step_recode</a></span><span class="op">(</span></span>
<span>    <span class="va">age_group</span>,</span>
<span>    <span class="va">e27</span> <span class="op">&lt;</span> <span class="fl">14</span> <span class="op">~</span> <span class="st">"Child"</span>,</span>
<span>    <span class="va">e27</span> <span class="op">&lt;</span> <span class="fl">65</span> <span class="op">~</span> <span class="st">"Adult"</span>,</span>
<span>    .default <span class="op">=</span> <span class="st">"Senior"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="aplicacion-de-recipes-a-nuevos-datos">Aplicacion de Recipes a nuevos datos<a class="anchor" aria-label="anchor" href="#aplicacion-de-recipes-a-nuevos-datos"></a>
</h3>
<p>Una vez publicada, cualquier persona puede recuperar una receta por
ID y aplicarla a sus datos:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Obtener una receta por ID desde la API (requiere servidor)</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/api_get_recipe.html">api_get_recipe</a></span><span class="op">(</span><span class="st">"ech_labor_001"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Aplicar a una nueva encuesta</span></span>
<span><span class="va">new_svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_recipe.html">add_recipe</a></span><span class="op">(</span><span class="va">new_svy</span>, <span class="va">r</span><span class="op">)</span></span>
<span><span class="va">processed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bake_recipes.html">bake_recipes</a></span><span class="op">(</span><span class="va">new_svy</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="documentacion-de-recipes">Documentacion de Recipes<a class="anchor" aria-label="anchor" href="#documentacion-de-recipes"></a>
</h3>
<p>Las recetas documentan automaticamente sus transformaciones:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">doc</span> <span class="op">&lt;-</span> <span class="va">labor_recipe</span><span class="op">$</span><span class="fu">doc</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "meta"             "input_variables"  "output_variables" "pipeline"</span></span>
<span></span>
<span><span class="co"># Input variables required</span></span>
<span><span class="va">doc</span><span class="op">$</span><span class="va">input_variables</span></span>
<span><span class="co">#&gt; [1] "HT11"     "POBPCOAC" "e27"      "e26"      "region"</span></span>
<span></span>
<span><span class="co"># Output variables created</span></span>
<span><span class="va">doc</span><span class="op">$</span><span class="va">output_variables</span></span>
<span><span class="co">#&gt; [1] "ht11_thousands"   "employed"         "working_age"      "mean_income_dept"</span></span>
<span><span class="co">#&gt; [5] "labor_status"     "age_group"        "gender"           "mapping"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="configuracion-del-paquete">Configuracion del paquete<a class="anchor" aria-label="anchor" href="#configuracion-del-paquete"></a>
</h2>
<p>metasurvey ofrece configuraciones globales que se pueden ajustar
segun el flujo de trabajo:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check current lazy-processing setting</span></span>
<span><span class="fu"><a href="../reference/lazy_default.html">lazy_default</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># TRUE = steps recorded but not executed immediately</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># Check data-copy behavior</span></span>
<span><span class="fu"><a href="../reference/use_copy_default.html">use_copy_default</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># TRUE = operate on copies (safer but slower)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># View available computation engines</span></span>
<span><span class="fu"><a href="../reference/show_engines.html">show_engines</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># "data.table", "dplyr", etc.</span></span>
<span><span class="co">#&gt; [1] "data.table" "tidyverse"  "dplyr"</span></span></code></pre></div>
<p>Se pueden modificar las configuraciones para la sesion actual:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Disable lazy evaluation (execute steps immediately)</span></span>
<span><span class="fu"><a href="../reference/set_lazy_processing.html">set_lazy_processing</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Modify inplace (faster, but modifies original data)</span></span>
<span><span class="fu"><a href="../reference/set_use_copy.html">set_use_copy</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reset to defaults</span></span>
<span><span class="fu"><a href="../reference/set_lazy_processing.html">set_lazy_processing</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/set_use_copy.html">set_use_copy</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="compartir-el-trabajo-el-ecosistema-de-recipes">Compartir el trabajo: el ecosistema de recipes<a class="anchor" aria-label="anchor" href="#compartir-el-trabajo-el-ecosistema-de-recipes"></a>
</h2>
<p>Uno de los objetivos de metasurvey es reducir el esfuerzo duplicado
en la comunidad de investigadores que trabajan con encuestas. Si se ha
construido un pipeline de procesamiento util, es posible publicarlo para
que otros lo encuentren y reutilicen. El paquete se conecta a una API
publica donde se almacenan recipes y workflows:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Buscar recipes existentes (requiere servidor API)</span></span>
<span><span class="va">ech_recipes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/api_list_recipes.html">api_list_recipes</a></span><span class="op">(</span>survey_type <span class="op">=</span> <span class="st">"ech"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">ech_recipes</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Buscar algo especifico</span></span>
<span><span class="va">labor</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/api_list_recipes.html">api_list_recipes</a></span><span class="op">(</span>search <span class="op">=</span> <span class="st">"labor"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Para publicar, crear una cuenta primero</span></span>
<span><span class="fu"><a href="../reference/api_register.html">api_register</a></span><span class="op">(</span><span class="st">"Your Name"</span>, <span class="st">"you@example.com"</span>, <span class="st">"password"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Luego publicar</span></span>
<span><span class="fu"><a href="../reference/api_publish_recipe.html">api_publish_recipe</a></span><span class="op">(</span><span class="va">labor_recipe</span><span class="op">)</span></span></code></pre></div>
<p>El ecosistema soporta tres niveles de certificacion (comunitaria,
revisada, oficial) y tres tipos de cuenta (individual, miembro
institucional, institucion). Las cuentas institucionales requieren
aprobacion de un administrador, lo que asegura que las certificaciones
tengan respaldo real.</p>
<p>Para mas detalles, consultar <a href="recipes.html">Creacion y
comparticion de Recipes</a>.</p>
</div>
<div class="section level2">
<h2 id="datos-y-agradecimientos">Datos y agradecimientos<a class="anchor" aria-label="anchor" href="#datos-y-agradecimientos"></a>
</h2>
<p>Los datos de ejemplo utilizados en esta vinieta provienen de la
<em>Encuesta Continua de Hogares</em> (ECH) 2023, publicada por el
Instituto Nacional de Estadistica (INE) de Uruguay. Los microdatos
completos estan disponibles en <a href="https://www.gub.uy/instituto-nacional-estadistica/" class="external-link">INE</a>.</p>
<p>El paquete <strong><a href="https://calcita.github.io/ech/" class="external-link">ech</a></strong> de Gabriela
Mathieu y Richard Detomasi fue una inspiracion importante para
metasurvey. Mientras que <code>ech</code> provee funciones listas para
usar para calcular indicadores socioeconomicos, metasurvey toma un
enfoque diferente: proporciona una capa de metaprogramacion que permite
a los usuarios definir, compartir y reproducir sus propios pipelines de
procesamiento.</p>
</div>
<div class="section level2">
<h2 id="paquetes-relacionados">Paquetes relacionados<a class="anchor" aria-label="anchor" href="#paquetes-relacionados"></a>
</h2>
<p>metasurvey es parte de un ecosistema creciente de paquetes de R para
el analisis de encuestas de hogares en America Latina:</p>
<ul>
<li>
<strong><a href="https://calcita.github.io/ech/" class="external-link">ech</a></strong> –
Funciones para el calculo de indicadores socioeconomicos con la ECH de
Uruguay (Mathieu &amp; Detomasi). Provee funciones listas para usar
sobre pobreza, ingresos, educacion e indicadores de empleo.</li>
<li>
<strong><a href="https://docs.ropensci.org/eph/" class="external-link">eph</a></strong> –
Herramientas para trabajar con la Encuesta Permanente de Hogares de
Argentina. Publicado en rOpenSci. Cubre descarga de datos, construccion
de paneles y calculo de pobreza.</li>
<li>
<strong><a href="https://cran.r-project.org/package=survey" class="external-link">survey</a></strong> –
El paquete fundamental para inferencia basada en disenio con encuestas
complejas <span class="citation">(<a href="#ref-lumley2004">Lumley
2004</a>)</span>. metasurvey se construye sobre el.</li>
</ul>
</div>
<div class="section level2">
<h2 id="proximos-pasos">Proximos pasos<a class="anchor" aria-label="anchor" href="#proximos-pasos"></a>
</h2>
<p>Ahora que se comprenden los conceptos basicos, se pueden explorar
estas guias:</p>
<ul>
<li>
<strong><a href="recipes.html">Creacion y comparticion de
Recipes</a></strong> – Registro de recipes, certificacion y
descubrimiento</li>
<li>
<strong><a href="workflows-and-estimation.html">Workflows de
estimacion</a></strong> – <code><a href="../reference/workflow.html">workflow()</a></code>,
<code>RecipeWorkflow</code> y estimaciones publicables</li>
<li>
<strong><a href="complex-designs.html">Survey designs y
validacion</a></strong> – Estratificacion, conglomerados, pesos
replicados, validacion del pipeline</li>
<li>
<strong><a href="panel-analysis.html">Paneles rotativos y
PoolSurvey</a></strong> – Analisis longitudinal con
<code>RotativePanelSurvey</code> y <code>PoolSurvey</code>
</li>
<li>
<strong><a href="ech-case-study.html">Caso de estudio
ECH</a></strong> – Analisis completo del mercado laboral con comparacion
con STATA</li>
</ul>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="referencias">Referencias<a class="anchor" aria-label="anchor" href="#referencias"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-ine2023" class="csl-entry">
Instituto Nacional de Estadística (INE). 2023. <em>Encuesta Continua de
Hogares: Metodología y Documentación</em>. Instituto Nacional de
Estadística (INE), Uruguay. <a href="https://www.gub.uy/instituto-nacional-estadistica/" class="external-link">https://www.gub.uy/instituto-nacional-estadistica/</a>.
</div>
<div id="ref-lumley2004" class="csl-entry">
Lumley, Thomas. 2004. <span>“Analysis of Complex Survey Samples.”</span>
<em>Journal of Statistical Software</em> 9 (1): 1–19. <a href="https://doi.org/10.18637/jss.v009.i08" class="external-link">https://doi.org/10.18637/jss.v009.i08</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://iesta.fcea.udelar.edu.uy/integrantes/loprete-mauro/" class="external-link">Mauro Loprete</a>, <a href="https://natydasilva.github.io/natydasilva/" class="external-link">Natalia da Silva</a>, <a href="https://iecon.fcea.udelar.edu.uy/es/autores/item/machado-fabricio.html" class="external-link">Fabricio Machado</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
