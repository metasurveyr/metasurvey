<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get recipe from repository or API — get_recipe • metasurvey</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Get recipe from repository or API — get_recipe"><meta name="description" content="This function retrieves data transformation recipes from the metasurvey
repository or API, based on specific criteria such as survey type, edition,
and topic. It is the primary way to access predefined and community-validated
recipes."><meta property="og:description" content="This function retrieves data transformation recipes from the metasurvey
repository or API, based on specific criteria such as survey type, edition,
and topic. It is the primary way to access predefined and community-validated
recipes."><meta property="og:image" content="https://metasurveyr.github.io/metasurvey/logo.png"><!-- javascript assets for rmarkdown --><meta name="pkgdown-site-root" content="../"><script src="../ace-1.2.3/ace.js" type="text/javascript" charset="utf-8"></script><script src="../holder-2.9.0/holder.min.js" type="text/javascript" charset="utf-8"></script><script src="../snippets/snippets.js" type="text/javascript" charset="utf-8"></script><style type="text/css">
.snippet {
  border: solid 1px #cccccc;
  margin-bottom: 12px;
  width: 100%;
}
</style></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">metasurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/metasurveyr/metasurvey/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get recipe from repository or API</h1>
      <small class="dont-index">Source: <a href="https://github.com/metasurveyr/metasurvey/blob/main/R/Recipes.R" class="external-link"><code>R/Recipes.R</code></a></small>
      <div class="d-none name"><code>get_recipe.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function retrieves data transformation recipes from the metasurvey
repository or API, based on specific criteria such as survey type, edition,
and topic. It is the primary way to access predefined and community-validated
recipes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_recipe</span><span class="op">(</span></span>
<span>  svy_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  svy_edition <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  topic <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  allowMultiple <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-svy-type">svy_type<a class="anchor" aria-label="anchor" href="#arg-svy-type"></a></dt>
<dd><p>String specifying the survey type. Examples:
"ech", "eaii", "eai", "eph"</p></dd>


<dt id="arg-svy-edition">svy_edition<a class="anchor" aria-label="anchor" href="#arg-svy-edition"></a></dt>
<dd><p>String specifying the survey edition.
Supported formats: "YYYY", "YYYYMM", "YYYY-YYYY"</p></dd>


<dt id="arg-topic">topic<a class="anchor" aria-label="anchor" href="#arg-topic"></a></dt>
<dd><p>String specifying the recipe topic. Examples:
"labor_market", "poverty", "income", "demographics"</p></dd>


<dt id="arg-allowmultiple">allowMultiple<a class="anchor" aria-label="anchor" href="#arg-allowmultiple"></a></dt>
<dd><p>Logical indicating whether multiple recipes are allowed.
If FALSE and multiple matches exist, returns the most recent one</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>Recipe</code> object or list of <code>Recipe</code> objects according to the
specified criteria and the value of <code>allowMultiple</code></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is essential for:</p><ul><li><p>Accessing official recipes: Get validated and maintained recipes
by specialized teams</p></li>
<li><p>Reproducibility: Ensure different users apply the same standard
transformations</p></li>
<li><p>Automation: Integrate recipes into automatic pipelines</p></li>
<li><p>Collaboration: Share methodologies between teams and organizations</p></li>
<li><p>Versioning: Access different recipe versions according to edition</p></li>
</ul><p>The function queries the metasurvey API to retrieve recipes. <strong>Internet
connection is required</strong>. If the API is unavailable or you need to work
offline:</p>
<p><strong>Working Offline:</strong></p><ul><li><p>Don't call <code>get_recipe()</code> - work directly with steps</p></li>
<li><p>Set <code>options(metasurvey.skip_recipes = TRUE)</code> to disable API calls</p></li>
<li><p>Load recipes from local files using <code><a href="read_recipe.html">read_recipe()</a></code></p></li>
<li><p>Create custom recipes with <code><a href="recipe.html">recipe()</a></code></p></li>
</ul><p>Search criteria are combined with AND operator, so all specified criteria
must match for a recipe to be returned.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="recipe.html">recipe</a></code> to create custom recipes
<code><a href="save_recipe.html">save_recipe</a></code> to save recipes locally
<code><a href="read_recipe.html">read_recipe</a></code> to read recipes from file
<code><a href="publish_recipe.html">publish_recipe</a></code> to publish recipes to the repository
<code><a href="load_survey.html">load_survey</a></code> where recipes are used</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Get specific recipe for ECH 2023</span></span></span>
<span class="r-in"><span><span class="va">ech_recipe</span> <span class="op">&lt;-</span> <span class="fu">get_recipe</span><span class="op">(</span></span></span>
<span class="r-in"><span>  svy_type <span class="op">=</span> <span class="st">"ech"</span>,</span></span>
<span class="r-in"><span>  svy_edition <span class="op">=</span> <span class="st">"2023"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Recipe for specific topic</span></span></span>
<span class="r-in"><span><span class="va">labor_recipe</span> <span class="op">&lt;-</span> <span class="fu">get_recipe</span><span class="op">(</span></span></span>
<span class="r-in"><span>  svy_type <span class="op">=</span> <span class="st">"ech"</span>,</span></span>
<span class="r-in"><span>  svy_edition <span class="op">=</span> <span class="st">"2023"</span>,</span></span>
<span class="r-in"><span>  topic <span class="op">=</span> <span class="st">"labor_market"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Allow multiple recipes</span></span></span>
<span class="r-in"><span><span class="va">available_recipes</span> <span class="op">&lt;-</span> <span class="fu">get_recipe</span><span class="op">(</span></span></span>
<span class="r-in"><span>  svy_type <span class="op">=</span> <span class="st">"eaii"</span>,</span></span>
<span class="r-in"><span>  svy_edition <span class="op">=</span> <span class="st">"2019-2021"</span>,</span></span>
<span class="r-in"><span>  allowMultiple <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use recipe in load_survey</span></span></span>
<span class="r-in"><span><span class="va">ech_with_recipe</span> <span class="op">&lt;-</span> <span class="fu"><a href="load_survey.html">load_survey</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="st">"ech_2023.dta"</span>,</span></span>
<span class="r-in"><span>  svy_type <span class="op">=</span> <span class="st">"ech"</span>,</span></span>
<span class="r-in"><span>  svy_edition <span class="op">=</span> <span class="st">"2023"</span>,</span></span>
<span class="r-in"><span>  recipes <span class="op">=</span> <span class="fu">get_recipe</span><span class="op">(</span><span class="st">"ech"</span>, <span class="st">"2023"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  bake <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Working offline - don't use recipes</span></span></span>
<span class="r-in"><span><span class="va">ech_offline</span> <span class="op">&lt;-</span> <span class="fu"><a href="load_survey.html">load_survey</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="st">"ech_2023.dta"</span>,</span></span>
<span class="r-in"><span>  svy_type <span class="op">=</span> <span class="st">"ech"</span>,</span></span>
<span class="r-in"><span>  svy_edition <span class="op">=</span> <span class="st">"2023"</span>,</span></span>
<span class="r-in"><span>  svy_weight <span class="op">=</span> <span class="fu"><a href="add_weight.html">add_weight</a></span><span class="op">(</span>annual <span class="op">=</span> <span class="st">"PESOANO"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Disable recipe API globally</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>metasurvey.skip_recipes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Now get_recipe() will return NULL with a warning</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For year ranges</span></span></span>
<span class="r-in"><span><span class="va">panel_recipe</span> <span class="op">&lt;-</span> <span class="fu">get_recipe</span><span class="op">(</span></span></span>
<span class="r-in"><span>  svy_type <span class="op">=</span> <span class="st">"ech_panel"</span>,</span></span>
<span class="r-in"><span>  svy_edition <span class="op">=</span> <span class="st">"2020-2023"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.mauroloprete.com" class="external-link">Mauro Loprete</a>, <a href="https://natydasilva.github.io/natydasilva/" class="external-link">Natalia da Silva</a>, <a href="https://iecon.fcea.udelar.edu.uy/es/autores/item/machado-fabricio.html" class="external-link">Fabricio Machado</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

